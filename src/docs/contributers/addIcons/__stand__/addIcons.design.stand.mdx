import { MdxImage } from '@consta/stand';
import { MdxMenu } from '@consta/stand';
import Icon1 from './images/Icon1.image.svg';
import Icon2 from './images/Icon2.image.svg';
import Icon3 from './images/Icon3.image.svg';
import Icon5 from './images/Icon5.image.svg';
import Icon6 from './images/Icon6.image.svg';
import Export from './images/Export.image.png';

Это инструкция по добавлению новых иконок в библиотеку Consta icons. Если вы хотите узнать про автоматическую генерацию компонентов из SVG, загляните в [эту инструкцию](##LIBS.LIB.STAND.TAB/lib:portal/stand:contributers-addicons/tab:dev)

<MdxMenu>

- [Правила отрисовки](#правила-отрисовки)
  - [Размер иконки](#размер-иконки)
  - [Скругление углов](#скругление-углов)
  - [Внешний вид иконки](внешний-вид-иконки)
- [Принципы работы с библиотекой](#принципы-работы-с-библиотекой)
- [Добавление в библиотеку в коде](#добавление-в-библиотеку-в-коде)
  - [Подготовка SVG](#подготовка-SVG)
  - [Добавление изменений в репозиторий Consta](#добавление-изменений-в-репозиторий-consta)
  - [Создание Pull request](#создание-pull-request)

</MdxMenu>

## Правила отрисовки

При создании иконок рекомендуем придерживаться нескольких правил, которые помогут создать общий визуальный стиль.

### Размер иконки

При отрисовке иконок используйте размеры **m**, **s** и **xs**:

| Название | Размер, px | Толщина линии, px | Охранное поле, px |
| :------: | :--------: | :---------------: | :---------------: |
|  **m**   |   24×24    |         2         |         2         |
|  **s**   |   16×16    |         1         |         1         |
|  **xs**  |   12×12    |         1         |         1         |

<MdxImage src={Icon1} />

### Скругление углов

Для создания мягких форм используйте скругления углов в **1px** и **2px**.

<MdxImage src={Icon2} />

### Внешний вид иконки

- Используйте формы, приближенные к правильным геометрическим фигурам.

<MdxImage src={Icon3} />

- Готовая иконка должна быть одним [шейпом](https://figma.community/blog/dlya-chego-sluzhit-instrument-shape-tool-v-figma.php) с заливкой. Чтобы объединить фигуры, составляющие иконки:

  1. Выберите объекты для объединения.
  2. На верхней панели нажмите значок объединения.
  3. В раскрывшемся списке выберите подходящий вариант объединения.
  4. Нажмите **Flatten selection**.

- Выровняйте координаты точек фигур иконки по пиксельной сетке.

<MdxImage src={Icon5} />

## Принципы работы с библиотекой

1. Добавляйте иконки, которые вы нарисовали, в библиотеку:

   - На левой боковой панели переключитесь на **Assets**.
   - Нажмите на значок раскрытой книжки.
   - Нажмите **Publish changes**.

2. Рисуйте иконки сразу в трех размерах.
3. Для корректного наследования стилей при замене одной иконки на другую, иконки должны иметь единый векторный слой **Vector**.
4. Размер **L** используется в библиотеке компонентов для мобильных приложений, либо в ситуациях, когда нужно добавить иконку, например, к заголовку, а размер **M** слишком мал. Внутри компонентов библиотеки Consta UI-kit размер **L** использовать не допускается.
5. Иконки, которые ждут изменений, красятся в цвет `warning`, а новые, ещё не добавленные в библиотеку — в `alert`.

<MdxImage src={Icon6} />

## Добавление в библиотеку в коде

Подробнее про автоматическую сборку иконок из SVG в компоненты читайте на [этой странице](##LIBS.LIB.STAND.TAB/lib:portal/stand:contributers-addicons/tab:dev)

### Подготовка SVG

1. Экспортируйте иконки из Figma в формате SVG.

<MdxImage src={Export} />

2. Откройте файл SVG в редакторе кода или текстовом редакторе (например, Блокнот или TextEdit)
3. Удалите атрибуты `fill`, `fillOpacity`, `width`, `height`. Это нужно для адаптации иконки к размеру компонента или теме.

Пример кода готовой иконки:

```tsx
<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  xmlns="http://www.w3.org/2000/svg"
>
  <path d="M13 8L3 14L3 2L13 8Z" />
</svg>
```

Вы можете задать свойства для рендера иконки::

| Свойство       | Тип                | По умолчанию | Описание                                        |
| -------------- | ------------------ | ------------ | ----------------------------------------------- |
| `color?`       | `mono`, `multiple` | `mono`       | Цветность иконки                                |
| `group?`       | -                  | -            | Группа иконки на стенде                         |
| `withoutSvgo?` | `boolean`          | -            | Выключить [`svgo`](https://github.com/svg/svgo) |

Например, так будет выглядеть код со свойствами `color?` и `group?`:

```tsx
<!-- ##color:mono ##group:communication -->
<svg
  width="16"
  height="16"
  viewBox="0 0 16 16"
  xmlns="http://www.w3.org/2000/svg"
>
  <path d="M13 8L3 14L3 2L13 8Z" />
</svg>
```

### Добавление изменений в репозиторий Consta

1. Клонируйте [репозиторий @consta/uikit](https://github.com/consta-design-system/uikit) на GitHub:

```bash
git clone https://github.com/consta-design-system/uikit.git
```

2. Создайте новую ветку:

```bash
git checkout -b feat/new_icons
```

3. Перейдите в папку с клонированным репозиторием.
4. Создайте папку с названием новой иконки в папке `/uikit/src/icons/` и переместите в нее экспортированные SVG.
5. В консоли в корне проекта выполните команду:

```bash
yarn pre-build
```

6. Сделайте коммит изменений:

```bash
git add .
git commit -m "<описание_коммита>"
```

7. Отправьте изменения в репозиторий @consta/uikit:

```bash
git push
```

### Создание Pull request

1. Перейдите на [GitHub](https://github.com/consta-design-system/uikit), найдите свою ветку и нажмите **New pull request**.
2. Выберите в первом селекте ветку **dev**, во втором свою. И заполните всё, что сможете.
3. Готово! Когда мы примем ваш пулреквест, иконки будут добавлены в библиотеку.
