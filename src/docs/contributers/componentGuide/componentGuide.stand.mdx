import { MdxMenu, MdxImage } from '@consta/stand';

import image1 from './images/component_guide_1.png';
import image2 from './images/component_guide_2.png';
import image3 from './images/component_guide_3.png';
import image4 from './images/component_guide_4.png';
import image5 from './images/component_guide_5.png';
import image6 from './images/component_guide_6.png';
import image7 from './images/component_guide_7.png';
import image8 from './images/component_guide_8.png';
import image9 from './images/component_guide_9.png';
import image10 from './images/component_guide10.png';
import image11 from './images/component_guide11.png';
import image12 from './images/component_guide12.png';

Мы разрабатываем компоненты в едином подходе, чтобы повысить масштабируемость и удобство использования дизайн-системы.
Для синхронизации кода и дизайна, структура и свойства компонентов описываются по методологии БЭМ. В этом гайде представлена надстройка над методологией, которая позволяет оптимизировать производительность компонентов в Figma. Мы используем последние нововведения Figma, чтобы дизайнеры могли ещё быстрее настраивать компоненты на своих проектах.

<MdxMenu>

- [Чем полезен гайд](#чем-полезен-гайд)
- [Что такое БЭМ](#что-такое-бэм)
  - [Блок](#блок)
  - [Элемент](#элемент)
  - [Модификатор](#модификатор)
- [Что такое ЧМК](#что-такое-чмк)
  - [Часть](#часть)
  - [Модуль](#модуль)
  - [Компонент](#компонент)
- [Как собирать компонент](#как-собирать-компонент)
  - [Подготовка](#подготовка)
  - [Подтверждение необходимости ЧМК подхода](#подтверждение-необходимости-чмк-подхода)
  - [Выделение частей](#выделение-частей)
  - [Выделение модулей](#выделение-модулей)
  - [Сборка компонента](#сборка-компонента)
  - [Согласование](#согласование)
- [Рекомендации](#рекомендации)

</MdxMenu>

## Чем полезен гайд

Гайд можно использовать для создания, доработки и пересборки компонентов в следующих библиотеках:
— Consta UI-Kit
— Consta Components
— Consta Charts

В Consta UI-Kit такие компоненты, как TextField, Select, Combobox используют подход, который описывается в этом гайде. К ним можно обращаться, как к примеру.

## Что такое БЭМ

БЭМ (Блок-Элемент-Модификатор) — методология разработки компонентов страниц. Мы используем эту методологию для того, чтобы компоненты в Figma и в коде были максимально синхронны.

### Блок — Компонент

В переводе на язык дизайна, блок — и есть компонент, который можно повторно переиспользовать. Также блоки можно вкладывать в другие блоки для создания более сложных компонентов.

### Элемент — Часть компонента

Элемент — составная часть компонента, которую нельзя использовать в отрыве от родительского компонента.

### Модификатор — Вариант или свойство

Модификатор — свойство или вариант компонента.

<MdxImage src={image1} />

## Что такое ЧМК

Методология БЭМ хорошо ложится на код. Но если строго следовать ей при создании компонентов в Figma, то можно столкнуться с переизбытком вариантов. С таким компонентом сложнее работать: трудно найти или добавить новый вариант, падает производительность.
Поэтому в новом подходе мы предлагаем надстройку «ЧМК» — часть-модуль-компонент, которая не влияет на базовую методологию и код, но упрощает жизнь дизайнерам-создателям и пользователям дизайн-системы.

### Часть

Это мельчайший элемент итогового компонента от которого строятся модули. Создаётся, как родительский компонент, но в качестве частей можно использовать и копии (instance) других компонентов.

<MdxImage src={image2} />

### Модуль

Крупный элемент итогового компонента. Собирается из частей, представляет собой полноценный функциональный блок.

<MdxImage src={image3} />

### Компонент

Финальный компонент, собранный из модулей и частей.

<MdxImage src={image4} />

Надстройку ЧМК мы используем в ситуациях, когда есть вероятность, что в компоненте будут сотни вариантов. [Посмотреть пример](<https://www.figma.com/file/3YupLr7pSdGLd7RvHo8HJ5/%F0%9F%92%A0-%D0%93%D0%B0%D0%B9%D0%B4-%D0%BF%D0%BE-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-(Community)?type=design&node-id=1-547&mode=design&t=OAULLPnY9fDnGCnG-4>)

Компоненты с малым количеством элементов и внутренних состояний, мы делаем без частей и модулей. [Посмотреть пример](<https://www.figma.com/file/3YupLr7pSdGLd7RvHo8HJ5/%F0%9F%92%A0-%D0%93%D0%B0%D0%B9%D0%B4-%D0%BF%D0%BE-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-(Community)?type=design&node-id=1-504&mode=design&t=OAULLPnY9fDnGCnG-4>)

Компоненты, собранные из базовых компонентов Consta UI-Kit мы всегда делаем с данной надстройкой. [Посмотреть пример](<https://www.figma.com/file/3YupLr7pSdGLd7RvHo8HJ5/%F0%9F%92%A0-%D0%93%D0%B0%D0%B9%D0%B4-%D0%BF%D0%BE-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-(Community)?type=design&node-id=1-504&mode=design&t=OAULLPnY9fDnGCnG-4>)

Если необходимо, ступень с модулями можно пропускать. [Посмотреть пример](<https://www.figma.com/file/3YupLr7pSdGLd7RvHo8HJ5/%F0%9F%92%A0-%D0%93%D0%B0%D0%B9%D0%B4-%D0%BF%D0%BE-%D1%81%D0%B1%D0%BE%D1%80%D0%BA%D0%B5-%D0%BA%D0%BE%D0%BC%D0%BF%D0%BE%D0%BD%D0%B5%D0%BD%D1%82%D0%BE%D0%B2-(Community)?type=design&node-id=1-504&mode=design&t=OAULLPnY9fDnGCnG-4>)

## Как собирать компонент

### Подготовка

В начале рекомендуем сформировать конечный образ компонента с максимальным количеством элементов. Можно сделать это как на бумаге, так и в Figma. На этом этапе не важны корректные Autolayout или наличие вариантов.

<MdxImage src={image5} />

### Подтверждение необходимости ЧМК подхода

На следующем этапе важно определиться: нужны ли части-модули для этого компонента или нет. Если несколько элементов компонента независимо друг от друга могут менять своё состояние — потребуются. Если нет, то можно приступать сразу к созданию вариантов.
В примере для TextField (см. рисунок выше) они требуются, так как контент в левой и правой частях меняется независимо друг от друга. Кроме того, есть и дополнительный контент в виде лейбла и подписи, которыми необходимо управлять независимо.

### Выделение частей

Далее необходимо определить, какие части есть в компоненте. В случае с TextField, имеем левую и правую части внутри инпута, а также лейбл и подпись.

<MdxImage src={image6} />

Когда список частей выделится, их нужно оформить в варианты. Важно предусмотреть, какие свойства должны быть в вариантах этих частей и не забывать, что количество размеров компонента должно быть равно количеству размеров его частей с модулями. При работе над размерами рекомендуем смотреть в существующие компоненты и придерживаться принятых переменных XS, S, M, L. За точку отсчёта размера удобнее всего брать переменные шрифта и расстояний.

Варианты частей должны отражать их различные состояния внутри компонента. Также их необходимо наделить свойствами. Названия свойств должны согласовываться с кодом, если дорабатывается существующий компонент или с другими компонентами дизайн-системы, если создаётся новый компонент. На этом этапе можно предусматривать автолейауты и выравнивание там, где это нужно.

### Выделение модулей

Когда части собраны, можно приступать к сборке модулей. Порядок действий такой же, как и с частями:

- предусмотреть размеры модулей, согласно частям,
- продумать варианты модуля и их свойства,
- обернуть результат в автолейауты, если это необходимо.

<MdxImage src={image7} />

На этом этапе важно проследить за автолейаутами. Самый простой способ — пробовать масштабировать компонент. Если что-то работает не так, как должно, стоит проверить настройки масштабирования у частей в составе модуля и у самого модуля.

### Сборка компонента

В состав финального компонента могут входить не только модули, но и части. В данном случае модуль всего один — инпут, а вокруг него, в составе компонента, части в виде лейбла и подписи.

<MdxImage src={image8} />

### Согласование

Когда компонент будет собран и ты убедишься, что всё работает корректно — можно отправлять на [согласование](https://t.me/Consta_Chat) дизайнерам Consta. Они проверят внутреннюю логику и выпустят релиз, если всё в порядке.

## Рекомендации

**Используйте инструменты Figma**

Главный инструмент дизайнера при работе с компонентами — Component Properties. С его помощью создаются варианты-состояния и настраиваются свойства.

**1. Boolean**

Можно использовать для уменьшения количества вариантов. Boolean имеет значения True и False, позволяет скрывать слои компонента, а также управлять их видимостью через панель свойств. Обратите внимание на то, что большое количество невидимых слоёв могут негативно влиять на производительность, поэтому инструмент лучше использовать там, где это уместно.

**2. Text**

Добавляет в панель свойств компонента редактируемое поле ввода с его текстовыми слоями. Удобен в случаях, когда необходимо единоразово менять текст в нескольких копиях (instance) одного компонента.

**3. Instance Swap**

Добавляет селект с возможностью подмены вложенных компонентов на общем уровне вложенности в панель свойств. Удобен в случае, когда необходимо подменять части в модулях и компонентах.

**Выносите свойства модулей и частей в компонент**

Для того, чтобы конечному пользователю компонента было проще ориентироваться и настраивать его варианты — важно выносить свойства частей/модулей в родительский компонент.

По умолчанию функция выключена. Чтобы её включить, нажмите на кнопку «Настройки» в панели свойств и активируйте свитч “Try new authoring features”.

<MdxImage src={image9} />

После включения в списке свойств появится пункт “Nested Instances”. Он отвечает за вынесение дочерних свойств в родительский компонент.

<MdxImage src={image10} />

После клика на пункт выберите дочерние свойства, которые необходимо вынести в родительский компонент.

<MdxImage src={image11} />

**Соблюдайте иерархию и нейминг**

Важно следить за наименованиями частей, модулей и компонентов, а также учитывать их вложенность. Рекомендуем следующую систему имён для того, чтобы компоненты собирались в правильные папки инспектора ассетов:

- для частей: Parts/_имя_,

- для модулей: Modules/_имя_

- для компонента: _имя_

Если соблюдать это правило, то в инспекторе ассетов на верхнем уровне всегда будет сам компонент, а его части сложатся в дополнительные папки и не будут мешать пользователю.

<MdxImage src={image12} />
